paths:
  - ./src

exclude_files:
  - '#.*test.*#'

layers:
  - name: Bridge
    collectors:
      - type: className
        regex: .*Bridge.*

  - name: Bridge - Doctrine
    collectors:
      - type: className
        regex: .*Bridge\\Doctrine.*

  - name: Bridge - Redis
    collectors:
      - type: className
        regex: .*Bridge\\Redis.*

  - name: Command
    collectors:
      - type: className
        regex: .*Command.*

  - name: DataCollector
    collectors:
      - type: className
        regex: .*DataCollector.*

  - name: Event
    collectors:
      - type: className
        regex: .*Event.*

  - name: EventListener
    collectors:
      - type: className
        regex: .*EventListener.*

  - name: Middleware
    collectors:
      - type: className
        regex: .*Middleware.*

  - name: Probe
    collectors:
      - type: className
        regex: .*Probe.*

  - name: Runner
    collectors:
      - type: className
        regex: .*Runner.*

  - name: Serializer
    collectors:
      - type: className
        regex: .*Serializer.*

  - name: Task
    collectors:
      - type: className
        regex: .*Task.*

ruleset:
  Bridge:
    - Task

  Command:
    - Event
    - EventListener
    - Middleware
    - Probe
    - Task

  DataCollector:
    - Event
    - EventListener
    - Probe
    - Task

  Event:
    - Probe
    - Task

  EventListener:
    - Event
    - EventListener
    - Probe
    - Serializer
    - Task

  Middleware:
    - Middleware
    - Probe
    - Task

  Runner:
    - Task

  Serializer:
    - Probe
    - Serializer
    - Task

  Task:
    - Task
